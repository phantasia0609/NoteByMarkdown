>当然，这个格式处理技巧是 C++中的一个巧妙用法，旨在控制在序列数据的输出格式，特别是在处理最后一个元素的输出时。让我们详细分析这一行代码：

```cpp
std::cout << res(x) << " \n"[i == n - 1];
```

这里使用的是一个条件运算符（也称为三元运算符）`i == n - 1` 来决定在输出值 `res(x)` 后是添加一个空格 ` ` 还是换行符 `\n`。关键在于理解 `" \n"[i == n - 1]` 这部分的运作方式：

- **字符串字面量**：`" \n"` 是一个包含两个字符的字符串字面量，其中第一个字符是空格 ` `（索引为0），第二个字符是换行符 `\n`（索引为 1）。

- **条件表达式**：`i == n - 1` 是一个条件表达式，用于检查当前的索引 `i` 是否为最后一个元素的索引。如果是最后一个元素，表达式的值为 `true`（在 C++中等价于1），否则为 `false`（等价于0）。

- **索引访问**：根据条件表达式的结果（`true` 或 `false`，即1或0），从字符串字面量 `" \n"` 中选择一个字符。如果条件为 `true`（即 `i == n - 1`，意味着当前是最后一个元素），则选择 `\n`（索引1），实现在输出最后一个元素后换行。如果条件为 `false`（即 `i` 不是最后一个元素的索引），则选择空格 ` `（索引 0），在元素之间添加空格。

这种方式利用了 C++中字符串字面量可以像数组一样被索引访问的特性，以及条件表达式（`true` 为 1，`false` 为 0）可以直接用作索引的事实，实现了一个紧凑且高效的条件输出格式控制。通过这种方法，可以避免在循环体内使用更复杂的条件语句（如 `if-else`）来处理不同情况下的输出格式，从而使代码更简洁易读。
