在身份资源管理中提的供应业务的例子下描述完整的功能模块图
最大的那块叫环境Env资源管理，上面的地方叫身份资源管理，他俩中间的地方是消息交换中台
右侧是BPMN编排引擎，首先得将一个BPMN模型转换成链码（chaincode）再实例化部署到channel中
BPMN图描述的是一个业务流程，
联盟描述的是一个当前业务中的涉及成员（Org绑定者membership，membership可以有多个（一个企业在不同业务流程中扮演的不同身份））
下面的物理资源代表这些成员不同身份所绑定的唯一物理资源


---
现在让我来看看这张图我们具体要干什么
业务的身份描述，根据报告中的身份资源管理部分提到的顾客、零售商与生产商三方参与的关系，

>[!NOTE]
>1. 首先三方需要在平台上创建自己的组织，用户可以是某个产品需求公司，零售商可以是某个产品销售公司，生产商可以是某个产品生产制造公司。这样三方就拥有了唯一的平台上的身份。此时其中一方可以在平台上绘制BPMN编排图，BPMN编排图并且可以绑定参与方的身份，此时可以邀请对应的参与方的组织（Org）创建一个新的membership参加当前的执行当前BPMN编排图业务流程的联盟（Consortium），参与进当前编排图的Org可以对当前的编排图进行审计，一个联盟可以包含多个环境，BPMN编排图通过模型转换后，得到chaincode，chaincode会部署到对应的环境中，不同的环境中Org对应着不同的membership，每个membership唯一对应的着一个Firefly的链上身份，也就是Firefly的Org。当成为联盟成员通过membership绑定到一个环境中后，就会绑定FireFly的Org，Firefly的Org就会绑定到Fabric层中的唯一的节点（client)。
>2. 在身份资源整体构建和对应完整之后，在当前的环境Env中，membership可以通过消息交互中台链接当前参与方（Org）所具有的物理资源，可以是参与方企业的ERP系统中提供的API接口以获取企业中部分流程的信息,例如生产商的ERP系统提供了一个接口可以返回查询商品的生产状态信息和库存数量信息，也可以是参与方企业的数据库等。参与方可以选定部分物理资源通过数据治理整合功能，比如生产商选定了一些物理资源的API消息或是其他类型的信息，通过数据治理整合组装成一定格式的文件，这样子的文件最终就可以通过协作消息交换功能发送给对应的其他参与方。
>3. 在上述交互的过程中，参与方之间的协作应当遵循BPMN编排图中的流程，只有当客户参与方发送了请求商品的信息，根据BPMN编排图中的流程，零售商才可以返回对应的商品的价格以及商品库存是否可用等信息，并且如果在商品库存不可用又将发送给生产商信息，生产商只有在接收到零售商发送的信息后才能够发送返回信息。所有的BPMN编排图的执行过程都完整的遵守着各层级之间的身份信息，且通过消息交换中台完成参与方之间的信息交换。

>[!Info]
>我们将通过上述的顾客、零售商、生产商三个方面来完整的叙述这些功能的详细情况
>	1. 组织管理：这些实际存在的组织在平台中创建唯一的组织Org，管理着当前组织所具有的一些具体信息，比如生产商的公司名称、公司地址、公司联系方式等。
>	2. BPMN编排图建模：组织可以在平台中进行BPMN编排图建模，并且可以绑定参与编排图执行流程的组织。建模出的BPMN编排图是某个实际业务中所进行的具体执行流程。在样例中，这个BPMN编排图是顾客从零售商购物的完整业务流程。
>	3. 模型转换：绘制好的BPMN编排图可以转换成智能合约，在后期用于底层的Fabric区块链网络中。
>	4. 实例化部署：BPMN编排图转换成的智能合约实例化并部署到区块链底层网络中，在共识中按序执行当前的业务。
>	5. 联盟管理：这些组织可以以一定的身份加入进一个具体的联盟，组织处理事务的范围实际上是在整个联盟当中进行处理，并且一个联盟可以对应多个BPMN编排图的执行流程。顾客、零售商、生产商对应的三个组织就在当前的联盟中去执行相应的多个业务流程。
>	6. 成员membership管理：每个组织可以创建多个Membership，以不同的身份参与进不同环境的协作流程。当前的顾客可能是另一种物品的生产商，在另一个环境中以生产商的身份参与协作流程。
>	7. Firefly快速构建：在联盟构建好后，对应的membership会唯一对应Firefly中的一个组织org，Firefly的Org是进行协作流程的核心，它承担着承上启下的作用，它一方面连接着用户层面的membership，另一方面连接着底层区块链网络。
>	8. 区块链快速构建：Firefly的每个Org节点都会唯一对应底层区块链网络中的一个Client，以此将用户层完整的链接到底层的区块链网络中。
>	9. 链接组织资源：创建好协作流程以及全部身份结构的联盟中的组织Org，可以链接当前组织所拥有的物理资源。例如，生产商可以链接当前仓库货物信息数据库提供的查询货物数量、价格、可用性的api，也可以是企业ERP系统中可以获取某些流程信息的API。
>	10. 数据治理整合：通过有选择性的筛选当前组织的物理资源，可以快速的定义一定的文件格式，快速整合出符合这一文件格式的数据内容，以便组织间的数据交换。
>	11. 数据分享交换：组织可以发送广播或是私有消息，广播消息会发给每一个组织，私有消息可以选定部分组织接受消息；在这两条消息类型的基础上组织可以发送一般的消息，可以是具体内容的通知等，也可以发送在数据治理整合过程中整合好的一定文件格式的数据内容；同样可以临时通过存储设备上传文件，发送给对应的接受的组织。
>	12. 流程状态查看和审计：数据交换分享的目的是为了完成BPMN编排图中描述的业务流程中所必须的信息的互相交换，在完成信息的交换和处理后BPMN编排图会按业务流程自动向后执行，参与方可以查看当前BPMN编排图的执行状况，并且对BPMN编排图进行审计，以避免发生执行过程中的错误。
>


7. **Fire****fly**快速构建：